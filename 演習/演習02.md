# Gitの基本操作

## 1. branchを作成する

`git branch ブランチ名`で現在作業しているコミット(HEAD)からブランチを作成することが出来ます。

```bash
git branch feature_a
git branch feature_b
```

`git log`を確認すると、現在のcommitに、新たにブランチが作成されていることが分かります。

```bash
git log
```

結果

```bash
% git log
commit a4d697e89a886a17005a3de477ee708ac66b2fd9 (HEAD -> main, feature_b, feature_a)
Author: riku.kataoka <riku.kataoka@optim.co.jp>
Date:   Tue Mar 12 11:29:46 2024 +0900

    箇条書きリストの追加

commit 3a3caf3bb2b9c8dc5df205576731c28205297125
Author: riku.kataoka <riku.kataoka@optim.co.jp>
Date:   Tue Mar 12 11:28:52 2024 +0900

    READMEを新規作成
```

ブランチの一覧を確認したい場合、次のコマンドを実行します。

```bash
git branch
```

結果

```bash
% git branch
  feature_a
  feature_b
* main
```

アスタリスクが付いているブランチが、現在作業中のブランチになります。

## 2. 作業するbranchを切り替える

後ほど説明しますが、現在はmainブランチで作業を行っているため、
作業対象を別のブランチに切り替える必要があります。

```bash
git switch feature_a
```

これにより、作業対象がfeature_aブランチに切り替わります。

`git log`を確認すると、**HEAD**がfeature_aブランチを指していることが分かります。

```bash
git log
```

結果

```bash
% git log
commit a4d697e89a886a17005a3de477ee708ac66b2fd9 (HEAD -> feature_a, main, feature_b)
Author: riku.kataoka <riku.kataoka@optim.co.jp>
Date:   Tue Mar 12 11:29:46 2024 +0900

    箇条書きリストの追加

commit 3a3caf3bb2b9c8dc5df205576731c28205297125
Author: riku.kataoka <riku.kataoka@optim.co.jp>
Date:   Tue Mar 12 11:28:52 2024 +0900

    READMEを新規作成
```

`HEAD -> feature_a`の部分。
**HEAD**とは、今自分が作業している場所を示すポインタのことです。

`git branch`を実行すると、

```bash
% git branch
* feature_a
  feature_b
  main
```

こちらも作業ブランチが切り替わっていることが分かります。




## 3. 新たに変更点を加えてcommitする

演習01を参考に、以下の変更を行いcommitしてください。

- 新たに「FeatureA.md」というファイルを作成する
	- 中身は空でOK
- READMEに以下の行を追加する

```md
# 見出し

## 箇条書きの例

- 箇条書き1
- 箇条書き2
- 箇条書き3

## 番号付きリストの例

1. リスト1
2. リスト2
3. リスト3

## 機能一覧

- FeatureA
```

変更を行ったら結果は次のようになるはずです。

```bash
git log
```

結果

```bash
% git log
commit bf025624f8bc0ab6c19cebfc4c8569a1538f236a (HEAD -> feature_a)
Author: riku.kataoka <riku.kataoka@optim.co.jp>
Date:   Tue Mar 12 12:52:13 2024 +0900

    FeatureAを追加

commit a4d697e89a886a17005a3de477ee708ac66b2fd9 (main, feature_b)
Author: riku.kataoka <riku.kataoka@optim.co.jp>
Date:   Tue Mar 12 11:29:46 2024 +0900

    箇条書きリストの追加
```

## 4. 変更をmainブランチにマージする

feature_aの変更をmainブランチに取り込みます。

マージは**取り込む**作業なので、作業場所は取り込み先のブランチとなります。

```bash
git switch main
```

`git switch`コマンドによって、feature_aブランチから、mainブランチの地点へと切り替えることが出来ます。
(時系列ではなく、時間軸の切り替え)

コマンド実行した結果、feature_aへ追加した変更が元に戻っていることがわかります。

- README.mdの内容とFeatureA.mdが存在しないことを確認してください

確認が出来たらマージします。

```bash
git merge --no-ff feature_a
```

コマンドを実行すると、マージコミットを作成するため、commitした時と同様の画面が表示されます。
マージコミットの場合、commitメッセージは事前に入力されているので、保存して閉じるだけです。

マージが出来たらlogは次のようになります。

結果

```bash
git log
```

```bash
% git log 
commit a36828847f1c7535248f6731330009d55151966b (HEAD -> main)
Merge: a4d697e bf02562
Author: riku.kataoka <riku.kataoka@optim.co.jp>
Date:   Tue Mar 12 14:09:35 2024 +0900

    Merge branch 'feature_a'

commit bf025624f8bc0ab6c19cebfc4c8569a1538f236a (feature_a)
Author: riku.kataoka <riku.kataoka@optim.co.jp>
Date:   Tue Mar 12 12:52:13 2024 +0900

    FeatureAを追加

commit a4d697e89a886a17005a3de477ee708ac66b2fd9 (feature_b)
Author: riku.kataoka <riku.kataoka@optim.co.jp>
Date:   Tue Mar 12 11:29:46 2024 +0900

    箇条書きリストの追加
```

Tips:
`git merge`のデフォルトの動作では、マージコミットを発生させる必要がない場合マージコミットを作成しません。
これは、マージまでの間に何も変更がない場合に発生します。
`--no-ff`オプションを付けることで、必ずマージコミットを付与することが出来ます。
